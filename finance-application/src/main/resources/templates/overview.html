<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorator="layout">
<body>

<div layout:fragment="content" class="container" >

  <h4>Ãœberblick</h4>
  
  <div class="card card-body">
    <form method="post" th:action="@{/overview/currentamount}">
      <div class="form-group">
        <label for="currentamount">Aktueller Betrag</label>
        <input type="number" class="form-control" id="currentamount" name="currentamount" 
          aria-describedby="nameHelp" th:value="${currentamount}"/>
        <small id="currentamountHelp" class="form-text text-muted">Der aktuell vorhandene Geldbetrag.</small>
      </div>
      <button type="submit" class="btn btn-primary">Aktualisieren</button>
    </form>
  </div>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Monat</th>
        <th>Fixe Kosten</th>
        <th>Sonder Kosten</th>
        <th>Saldo</th>
        <th/>
      </tr>
    </thead>
    <tbody>
      <tr th:each="entry, iter : ${entries}">
        <td th:text="${entry.displayMonth}"></td>
        <td th:text="${entry.displayFixedAmount}"></td>
        <td th:text="${entry.displaySpecialAmount}"></td>
        <td th:text="${entry.displayCurrentAmount}" th:style="'font-weight: bold;' + (${entry.negative} ? 'color:red;' : '')"></td>
        <td>
          <a href="#" data-toggle="modal" th:attr="data-target=${'#detailsModal' + iter.index}" class="icon-link">
            <i class="fas fa-file-invoice"></i>
          </a>
				  <div class="modal fade" th:id="'detailsModal' + ${iter.index}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
				    <div class="modal-dialog" role="document">
				      <div class="modal-content">
				        <div class="modal-header">
				          <h5 class="modal-title" id="detailsModalLabel" th:text="'Details vom ' + ${entry.displayMonth}"></h5>
				          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
				            <span aria-hidden="true">&times;</span>
				          </button>
				        </div>
				        <div class="modal-body">
				          
				          <div th:if="${entry.countOfSpecialcosts > 0}">
                    <h6>Sonderkosten:</h6>
                    <table class="table table-striped">
                      <tbody>
                        <tr th:each="cost : ${entry.specialCosts}">
                         <td th:text="${cost.name}"></td>
                         <td th:text="${cost.displayAmount}"></td>
                        </tr>
                      </tbody>
                     </table>
                  </div>
                  <p>
				          <div th:if="${entry.countOfFixedcosts > 0}">
				            <h6>Fixkosten:</h6>
				            <table class="table table-striped">
				              <tbody>
				     	          <tr th:each="cost : ${entry.fixedCosts}">
	                       <td th:text="${cost.name}"></td>
	                       <td th:text="${cost.displayAmount}"></td>
	                       <td th:text="${cost.type}"></td>
	                      </tr>
                      </tbody>
                     </table>
				          </div>
				          
				          
				        </div>
				        <div class="modal-footer">
				        </div>
				      </div>
				    </div>
				  </div>
        </td>
      </tr>
    </tbody>
  </table>
  

</div>


</body>
</html>
